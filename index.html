<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üèê Arena Beach Tennis - Sistema de Pedidos</title>
  <style>
    :root {
      --primary: #1e88e5;
      --secondary: #43a047;
      --danger: #e53935;
      --warning: #fb8c00;
      --light: #f5f5f5;
      --dark: #263238;
      --sand: #f4e9cd;
      --court: #38b6ff;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: var(--sand);
      color: var(--dark);
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      border-bottom: 3px solid var(--court);
      margin-bottom: 30px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .logo-icon {
      font-size: 2.5rem;
      color: var(--court);
    }
    
    .logo h1 {
      font-size: 1.8rem;
      color: var(--dark);
    }
    
    .date-info {
      text-align: right;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align: center;
    }
    
    .stat-card h3 {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 10px;
    }
    
    .stat-card .value {
      font-size: 2rem;
      font-weight: bold;
      color: var(--primary);
    }
    
    .stat-card.success .value { color: var(--secondary); }
    .stat-card.warning .value { color: var(--warning); }
    .stat-card.danger .value { color: var(--danger); }
    
    .main-content {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .courts-section {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    
    .section-title {
      font-size: 1.4rem;
      margin-bottom: 20px;
      color: var(--dark);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .courts-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
    }
    
    .court {
      aspect-ratio: 1/1;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.3rem;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }
    
    .court.free {
      background-color: #e3f2fd;
      border: 2px solid #bbdefb;
      color: var(--primary);
    }
    
    .court.busy {
      background-color: #ffebee;
      border: 2px solid #ffcdd2;
      color: var(--danger);
    }
    
    .court.preparing {
      background-color: #fff8e1;
      border: 2px solid #ffecb3;
      color: var(--warning);
    }
    
    .court:hover {
      transform: scale(1.05);
    }
    
    .orders-section {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      height: fit-content;
    }
    
    .order-item {
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
      background-color: #f9f9f9;
      border-left: 4px solid var(--primary);
    }
    
    .order-item.busy {
      border-left-color: var(--danger);
      background-color: #ffebee;
    }
    
    .order-item.preparing {
      border-left-color: var(--warning);
      background-color: #fff8e1;
    }
    
    .order-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-weight: bold;
    }
    
    .order-items {
      font-size: 0.95rem;
      color: #555;
      margin-bottom: 10px;
    }
    
    .order-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .order-total {
      font-weight: bold;
      color: var(--primary);
      font-size: 1.1rem;
    }
    
    .order-actions button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s;
    }
    
    .order-actions button:hover {
      background: #1565c0;
    }
    
    .order-actions button.delivered {
      background: var(--secondary);
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background: white;
      border-radius: 15px;
      width: 90%;
      max-width: 600px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      position: relative;
    }
    
    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5rem;
      cursor: pointer;
      color: #999;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .menu-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 15px;
      background: #f5f9ff;
      border-radius: 8px;
      cursor: pointer;
    }
    
    .menu-item:hover { background: #e3f2fd; }
    
    .cart-items {
      margin-bottom: 20px;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .cart-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .cart-total {
      display: flex;
      justify-content: space-between;
      font-size: 1.2rem;
      font-weight: bold;
      margin: 20px 0;
      border-top: 2px dashed #ddd;
      padding-top: 10px;
    }
    
    .btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .btn-block { width: 100%; }
    .btn-success { background: var(--secondary); }
    .btn-danger { background: var(--danger); margin-top: 10px;}

    @media (max-width: 900px) {
      .main-content { grid-template-columns: 1fr; }
      .courts-grid { grid-template-columns: repeat(3, 1fr); }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <div class="logo-icon">üèê</div>
        <h1>ARENA BEACH TENNIS</h1>
      </div>
      <div class="date-info">
        <h2 id="current-date">S√°bado, 07 de Fevereiro de 2026</h2>
        <p>‚òÄÔ∏è Gest√£o em Tempo Real</p>
      </div>
    </header>

    <div class="stats-grid">
      <div class="stat-card">
        <h3>Pedidos Ativos</h3>
        <div class="value" id="stat-orders">0</div>
      </div>
      <div class="stat-card success">
        <h3>Total Entregue</h3>
        <div class="value" id="stat-delivered">0</div>
      </div>
      <div class="stat-card danger">
        <h3>Quadras Ativas</h3>
        <div class="value" id="stat-courts">0/12</div>
      </div>
    </div>

    <div class="main-content">
      <div class="courts-section">
        <h2 class="section-title">üó∫Ô∏è Mapa das Quadras</h2>
        <div class="courts-grid" id="courts-grid"></div>
      </div>

      <div class="orders-section">
        <h2 class="section-title">‚ö° Comandas Ativas</h2>
        <div id="orders-list"></div>
        <button class="btn btn-danger btn-block" onclick="resetSystem()">‚ö†Ô∏è Resetar Sistema</button>
      </div>
    </div>

    <footer>
      <p>¬© 2026 Arena Beach Tennis - Sistema Web</p>
    </footer>
  </div>

  <div class="modal" id="order-modal">
    <div class="modal-content">
      <span class="modal-close" id="close-modal">&times;</span>
      <h2 class="modal-title">üìù Novo Pedido - Quadra <span id="modal-court-number">1</span></h2>
      
      <div class="form-group">
        <label>Observa√ß√£o</label>
        <input type="text" id="observation" placeholder="Ex: Sem gelo...">
      </div>
      
      <h3>ü•§ Menu</h3>
      <div class="menu-grid" id="menu-grid"></div>
      
      <h3>üõí Carrinho</h3>
      <div class="cart-items" id="cart-items"></div>
      
      <div class="cart-total">
        <span>Total:</span>
        <span id="cart-total">R$ 0,00</span>
      </div>
      
      <button class="btn btn-block btn-success" id="confirm-order">‚úÖ Confirmar Pedido</button>
    </div>
  </div>

  <script>
    // ESTADO DA APLICA√á√ÉO
    const state = {
      courts: Array(12).fill('free'),
      orders: [],
      menu: [
        { id: 1, name: '√Ågua 500ml', price: 6.00 },
        { id: 2, name: '√Ågua de coco', price: 10.00 },
        { id: 3, name: 'Isot√¥nico', price: 12.00 },
        { id: 4, name: 'A√ßa√≠ 300g', price: 18.00 },
        { id: 5, name: 'Sandu√≠che', price: 20.00 },
        { id: 6, name: 'Cerveja Lata', price: 10.00 }
      ],
      cart: [],
      selectedCourt: 1,
      nextOrderId: 1
    };

    // PERSIST√äNCIA (LOCALSTORAGE)
    function saveToStorage() {
      localStorage.setItem('arena_data', JSON.stringify({
        orders: state.orders,
        nextId: state.nextOrderId
      }));
    }

    function loadFromStorage() {
      const saved = localStorage.getItem('arena_data');
      if (saved) {
        const data = JSON.parse(saved);
        state.orders = data.orders;
        state.nextOrderId = data.nextId;
      }
    }

    // INTERFACE
    function updateStats() {
      const active = state.orders.filter(o => o.status !== 'delivered');
      const delivered = state.orders.filter(o => o.status === 'delivered');
      const busyCourts = [...new Set(active.map(o => o.court))].length;

      document.getElementById('stat-orders').textContent = active.length;
      document.getElementById('stat-delivered').textContent = delivered.length;
      document.getElementById('stat-courts').textContent = `${busyCourts}/12`;
    }

    function renderCourts() {
      const grid = document.getElementById('courts-grid');
      grid.innerHTML = '';
      
      // Resetar status das quadras antes de pintar
      state.courts.fill('free');
      state.orders.forEach(o => {
        if(o.status !== 'delivered') state.courts[o.court-1] = o.status;
      });

      state.courts.forEach((status, i) => {
        const div = document.createElement('div');
        div.className = `court ${status}`;
        div.innerHTML = `<div>${i + 1}</div>`;
        div.onclick = () => openOrderModal(i + 1);
        grid.appendChild(div);
      });
    }

    function renderOrders() {
      const list = document.getElementById('orders-list');
      list.innerHTML = '';
      
      const active = state.orders.filter(o => o.status !== 'delivered');
      
      if(active.length === 0) {
        list.innerHTML = '<p style="text-align:center; color:#999">Nenhuma comanda aberta</p>';
        return;
      }

      active.forEach(order => {
        const total = order.items.reduce((sum, it) => sum + (it.price * it.qty), 0);
        const el = document.createElement('div');
        el.className = `order-item ${order.status}`;
        el.innerHTML = `
          <div class="order-header">
            <span>Quadra ${order.court} (#${order.id})</span>
            <span>${order.time}</span>
          </div>
          <div class="order-items">${order.items.map(i => `${i.qty}x ${i.name}`).join(', ')}</div>
          <div class="order-footer">
            <div class="order-total">R$ ${total.toFixed(2)}</div>
            <div class="order-actions">
              ${order.status === 'busy' ? 
                `<button onclick="updateStatus(${order.id}, 'preparing')">Preparar</button>` : 
                `<button class="delivered" onclick="updateStatus(${order.id}, 'delivered')">Entregue</button>`}
            </div>
          </div>
        `;
        list.appendChild(el);
      });
    }

    // A√á√ïES
    function openOrderModal(courtNum) {
      state.selectedCourt = courtNum;
      state.cart = [];
      document.getElementById('modal-court-number').textContent = courtNum;
      document.getElementById('observation').value = '';
      renderMenu();
      renderCart();
      document.getElementById('order-modal').style.display = 'flex';
    }

    function renderMenu() {
      const menu = document.getElementById('menu-grid');
      menu.innerHTML = '';
      state.menu.forEach(item => {
        const div = document.createElement('div');
        div.className = 'menu-item';
        div.innerHTML = `<span>${item.name}</span> <b>R$${item.price}</b>`;
        div.onclick = () => {
          const inCart = state.cart.find(i => i.id === item.id);
          if(inCart) inCart.qty++;
          else state.cart.push({...item, qty: 1});
          renderCart();
        };
        menu.appendChild(div);
      });
    }

    function renderCart() {
      const cartDiv = document.getElementById('cart-items');
      cartDiv.innerHTML = state.cart.length ? '' : '<p>Vazio</p>';
      let total = 0;
      state.cart.forEach(item => {
        total += item.price * item.qty;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `<span>${item.qty}x ${item.name}</span> <span>R$ ${(item.price*item.qty).toFixed(2)}</span>`;
        cartDiv.appendChild(div);
      });
      document.getElementById('cart-total').textContent = `R$ ${total.toFixed(2)}`;
    }

    document.getElementById('confirm-order').onclick = () => {
      if(!state.cart.length) return alert('Carrinho vazio!');
      
      const now = new Date();
      state.orders.push({
        id: state.nextOrderId++,
        court: state.selectedCourt,
        items: [...state.cart],
        status: 'busy',
        time: `${now.getHours()}:${now.getMinutes().toString().padStart(2,'0')}`
      });
      
      saveToStorage();
      document.getElementById('order-modal').style.display = 'none';
      renderCourts();
      renderOrders();
      updateStats();
    };

    function updateStatus(id, newStatus) {
      const order = state.orders.find(o => o.id === id);
      if(order) {
        order.status = newStatus;
        saveToStorage();
        renderCourts();
        renderOrders();
        updateStats();
      }
    }

    function resetSystem() {
      if(confirm('Isso apagar√° TODOS os pedidos. Confirma?')) {
        localStorage.clear();
        location.reload();
      }
    }

    // FECHAR MODAL
    document.getElementById('close-modal').onclick = () => document.getElementById('order-modal').style.display = 'none';

    // INICIAR
    window.onload = () => {
      loadFromStorage();
      renderCourts();
      renderOrders();
      updateStats();
    };
  </script>
</body>
</html>
